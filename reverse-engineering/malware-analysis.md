# Malware analysis

#### Forensic Techniques

**Feature extraction**

The goal is feature extraction is to identify unique static metadata from files. tools such as Strings is very useful to get metadata about the file. Malware comes in many different formats.

**Office file**

Malware office files frequently comes in form of visual basic macro or excel 4.0 macro. extracting macros from office files with oledump to do static analyze without having to run the malware. Fequently the marco is obfuscatated to make it hard to understand, using deobfuscation tools can help with this.

**Behavior extraction**

Behavior extraction is the method of executing the malware and analyzing how what it behavior it doing inside a sandbox.

#### Forensic procedures

**Executable Behavior extraction**

WIth the executable in hand, isolating it in a sandbox and executing it there and analyzing the log files of the system is a quick way to get an understanding of the procedure of the malware and what it does and in what order. An good example of this is doc files with embedded macros, taking it to a windows sandbox and executing it there to analyze what it does using Windows Sysmon

**Network**

****

****

## **Obfuscation**

****

### **Ghost writing**

Ghost Writing is a way of Obfuscating the binary / assembly code in such a way that the signature no longer exists due to malware code obfuscation and no functionality of the malware is lost . The Idea here is to add random Assembly instructions to the disassembly of the executable and maitaining the functionality of the malware at the sametime. This is also called ghostwriting for antivirus An common way to do this is using \[\[Metasploit]] msfvenom to output the malware in raw binary. use ruby libery metasm (gem install metasm) to convert the binary to assembly code. edit the assembly to scamble the signature (common way is before a point get xor with it self, add some random code to the pointer ) convert the assembly code to executable and you have a scambled malware.

****
